/**
 * Angular Carousel - Mobile friendly touch carousel for AngularJS
 * @version v0.0.1 - 2013-04-23
 * @link http://revolunet.com.github.com/angular-carousel
 * @author Julien Bouquillon <julien@revolunet.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("angular-carousel",[]).directive("carousel",["$document",function(){var e=0;return{restrict:"A",scope:!0,controller:["$scope","$element","$attrs",function(e,t){var n=0,i=0;this.addElement=function(e){n++,1===n&&(i=e[0].getBoundingClientRect().width,t.parent().css("width",this.getWidth()-2+"px"))},this.removeElement=function(){n--},this.getWidth=function(){return i}}],compile:function(t){return t.addClass("carousel-slides"),t.find("li").attr("slide-announcer",!0),function(t,n,i,o){e++;var r="carousel-"+e,a=0,s=0,c=0,u=0,l=0,d=n.wrap("<div id='"+r+"' class='carousel-container'></div>"),f=d.parent();f.getWidth=o.getWidth;var m=function(){return d.find("li")},v=function(){return m().length},h=function(e){return e.originalEvent!==void 0&&e.originalEvent.touches>0?e=e.originalEvent.touches[0]:e.touches!==void 0&&e.touches.length>0&&(e=e.touches[0]),e},g=function(e){e=h(e),0===a&&(a=1,s=e.clientX)},p=function(e){if(0!==a){e.preventDefault(),e=h(e);var t=e.clientX-s;if(1===a&&0!==t)a=2,c=u;else if(2===a){var n=v(),i=1;(0===l&&e.clientX>s||l===n-1&&s>e.clientX)&&(i=3),u=c+t/i,d.css({"-webkit-transform":"translate3d("+u+"px,0,0)"}).removeClass().addClass("carousel-noanimate")}}},E=function(){var e=v();if(a>0){a=0,l=c>u?l+1:l-1,l=Math.min(Math.max(l,0),e-1);var t=f.getWidth();u=l*-t,d.removeClass("carousel-noanimate").addClass("carousel-animate").css("-webkit-transform","translate3d("+u+"px,0,0)")}},b=function(e){console.log("mouseExit",e,e.targetElement)};f.bind("mousedown touchstart",g),f.bind("mousemove touchmove",p),f.bind("mouseup touchend",E),d.bind("mouseleave",b,!0),t.destroy=function(){}}}}}]).directive("slideAnnouncer",function(){return{restrict:"A",require:"^carousel",link:function(e,t,n,i){i&&(i.addElement(t),e.$on("$destroy",function(){i.removeElement(t)}))}}});